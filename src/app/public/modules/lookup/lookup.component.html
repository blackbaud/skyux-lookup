<div
  class="sky-lookup"
  [ngClass]="{
    'sky-lookup-focused': isInputFocused,
    'sky-lookup-disabled': disabled
  }"
>
  <sky-autocomplete
    [ariaLabelledBy]="ariaLabelledBy"
    [data]="data"
    [debounceTime]="debounceTime"
    [descriptorProperty]="descriptorProperty"
    [propertiesToSearch]="propertiesToSearch"
    [search]="search"
    [searchFilters]="searchFilters"
    [searchResultsLimit]="searchResultsLimit"
    [searchResultTemplate]="searchResultTemplate"
    [searchTextMinimumCharacters]="searchTextMinimumCharacters"
    (selectionChange)="onAutocompleteSelectionChange($event)">

    <div
      class="sky-lookup-search sky-form-control"
      [ngClass]="{
        'sky-field-status-active': isInputFocused
      }"
    >
      <sky-tokens
        [disabled]="disabled"
        [displayWith]="descriptorProperty"
        [focusable]="false"
        [messageStream]="tokensController"
        [tokens]="tokens"
        (keyup)="onTokensKeyUp($event)"
        (tokensChange)="onTokensChange($event)"
        (focusIndexOverRange)="onTokensFocusIndexOverRange()">

        <textarea
          class="sky-form-control"
          [attr.aria-label]="ariaLabel"
          [attr.aria-labelledby]="ariaLabelledBy"
          [attr.placeholder]="placeholderText"
          [disabled]="disabled"
          skyAutocomplete
          (blur)="onAutocompleteBlur()"
          (keydown.enter)="$event.preventDefault();"
          (keyup.delete)="$event.stopPropagation();"
          (keyup.escape)="clearSearchText();$event.preventDefault();"
          #lookupInput
        >
        </textarea>
      </sky-tokens>
    </div>
  </sky-autocomplete>
</div>
